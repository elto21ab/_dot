"use strict";var pn=Object.create;var B=Object.defineProperty;var mn=Object.getOwnPropertyDescriptor;var hn=Object.getOwnPropertyNames;var Sn=Object.getPrototypeOf,yn=Object.prototype.hasOwnProperty;var c=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),wn=(e,t)=>{for(var r in t)B(e,r,{get:t[r],enumerable:!0})},ve=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of hn(t))!yn.call(e,o)&&o!==r&&B(e,o,{get:()=>t[o],enumerable:!(n=mn(t,o))||n.enumerable});return e};var Ee=(e,t,r)=>(r=e!=null?pn(Sn(e)):{},ve(t||!e||!e.__esModule?B(r,"default",{value:e,enumerable:!0}):r,e)),gn=e=>ve(B({},"__esModule",{value:!0}),e);var Ge=c((go,Ce)=>{Ce.exports=Pe;Pe.sync=bn;var Ie=require("fs");function xn(e,t){var r=t.pathExt!==void 0?t.pathExt:process.env.PATHEXT;if(!r||(r=r.split(";"),r.indexOf("")!==-1))return!0;for(var n=0;n<r.length;n++){var o=r[n].toLowerCase();if(o&&e.substr(-o.length).toLowerCase()===o)return!0}return!1}function Te(e,t,r){return!e.isSymbolicLink()&&!e.isFile()?!1:xn(t,r)}function Pe(e,t,r){Ie.stat(e,function(n,o){r(n,n?!1:Te(o,e,t))})}function bn(e,t){return Te(Ie.statSync(e),e,t)}});var ke=c((xo,qe)=>{qe.exports=Re;Re.sync=vn;var Ae=require("fs");function Re(e,t,r){Ae.stat(e,function(n,o){r(n,n?!1:Oe(o,t))})}function vn(e,t){return Oe(Ae.statSync(e),t)}function Oe(e,t){return e.isFile()&&En(e,t)}function En(e,t){var r=e.mode,n=e.uid,o=e.gid,s=t.uid!==void 0?t.uid:process.getuid&&process.getuid(),i=t.gid!==void 0?t.gid:process.getgid&&process.getgid(),a=parseInt("100",8),u=parseInt("010",8),l=parseInt("001",8),f=a|u,h=r&l||r&u&&o===i||r&a&&n===s||r&f&&s===0;return h}});var Ne=c((vo,Le)=>{var bo=require("fs"),U;process.platform==="win32"||global.TESTING_WINDOWS?U=Ge():U=ke();Le.exports=J;J.sync=In;function J(e,t,r){if(typeof t=="function"&&(r=t,t={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(n,o){J(e,t||{},function(s,i){s?o(s):n(i)})})}U(e,t||{},function(n,o){n&&(n.code==="EACCES"||t&&t.ignoreErrors)&&(n=null,o=!1),r(n,o)})}function In(e,t){try{return U.sync(e,t||{})}catch(r){if(t&&t.ignoreErrors||r.code==="EACCES")return!1;throw r}}});var Fe=c((Eo,je)=>{var E=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",$e=require("path"),Tn=E?";":":",_e=Ne(),Be=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),Ue=(e,t)=>{let r=t.colon||Tn,n=e.match(/\//)||E&&e.match(/\\/)?[""]:[...E?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(r)],o=E?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",s=E?o.split(r):[""];return E&&e.indexOf(".")!==-1&&s[0]!==""&&s.unshift(""),{pathEnv:n,pathExt:s,pathExtExe:o}},Me=(e,t,r)=>{typeof t=="function"&&(r=t,t={}),t||(t={});let{pathEnv:n,pathExt:o,pathExtExe:s}=Ue(e,t),i=[],a=l=>new Promise((f,h)=>{if(l===n.length)return t.all&&i.length?f(i):h(Be(e));let m=n[l],S=/^".*"$/.test(m)?m.slice(1,-1):m,y=$e.join(S,e),w=!S&&/^\.[\\\/]/.test(e)?e.slice(0,2)+y:y;f(u(w,l,0))}),u=(l,f,h)=>new Promise((m,S)=>{if(h===o.length)return m(a(f+1));let y=o[h];_e(l+y,{pathExt:s},(w,v)=>{if(!w&&v)if(t.all)i.push(l+y);else return m(l+y);return m(u(l,f,h+1))})});return r?a(0).then(l=>r(null,l),r):a(0)},Pn=(e,t)=>{t=t||{};let{pathEnv:r,pathExt:n,pathExtExe:o}=Ue(e,t),s=[];for(let i=0;i<r.length;i++){let a=r[i],u=/^".*"$/.test(a)?a.slice(1,-1):a,l=$e.join(u,e),f=!u&&/^\.[\\\/]/.test(e)?e.slice(0,2)+l:l;for(let h=0;h<n.length;h++){let m=f+n[h];try{if(_e.sync(m,{pathExt:o}))if(t.all)s.push(m);else return m}catch{}}}if(t.all&&s.length)return s;if(t.nothrow)return null;throw Be(e)};je.exports=Me;Me.sync=Pn});var te=c((Io,ee)=>{"use strict";var De=(e={})=>{let t=e.env||process.env;return(e.platform||process.platform)!=="win32"?"PATH":Object.keys(t).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"};ee.exports=De;ee.exports.default=De});var Ve=c((To,Ke)=>{"use strict";var He=require("path"),Cn=Fe(),Gn=te();function Xe(e,t){let r=e.options.env||process.env,n=process.cwd(),o=e.options.cwd!=null,s=o&&process.chdir!==void 0&&!process.chdir.disabled;if(s)try{process.chdir(e.options.cwd)}catch{}let i;try{i=Cn.sync(e.command,{path:r[Gn({env:r})],pathExt:t?He.delimiter:void 0})}catch{}finally{s&&process.chdir(n)}return i&&(i=He.resolve(o?e.options.cwd:"",i)),i}function An(e){return Xe(e)||Xe(e,!0)}Ke.exports=An});var We=c((Po,re)=>{"use strict";var ne=/([()\][%!^"`<>&|;, *?])/g;function Rn(e){return e=e.replace(ne,"^$1"),e}function On(e,t){return e=`${e}`,e=e.replace(/(\\*)"/g,'$1$1\\"'),e=e.replace(/(\\*)$/,"$1$1"),e=`"${e}"`,e=e.replace(ne,"^$1"),t&&(e=e.replace(ne,"^$1")),e}re.exports.command=Rn;re.exports.argument=On});var Ye=c((Co,ze)=>{"use strict";ze.exports=/^#!(.*)/});var Ze=c((Go,Qe)=>{"use strict";var qn=Ye();Qe.exports=(e="")=>{let t=e.match(qn);if(!t)return null;let[r,n]=t[0].replace(/#! ?/,"").split(" "),o=r.split("/").pop();return o==="env"?n:n?`${o} ${n}`:o}});var et=c((Ao,Je)=>{"use strict";var oe=require("fs"),kn=Ze();function Ln(e){let r=Buffer.alloc(150),n;try{n=oe.openSync(e,"r"),oe.readSync(n,r,0,150,0),oe.closeSync(n)}catch{}return kn(r.toString())}Je.exports=Ln});var ot=c((Ro,rt)=>{"use strict";var Nn=require("path"),tt=Ve(),nt=We(),$n=et(),_n=process.platform==="win32",Bn=/\.(?:com|exe)$/i,Un=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function Mn(e){e.file=tt(e);let t=e.file&&$n(e.file);return t?(e.args.unshift(e.file),e.command=t,tt(e)):e.file}function jn(e){if(!_n)return e;let t=Mn(e),r=!Bn.test(t);if(e.options.forceShell||r){let n=Un.test(t);e.command=Nn.normalize(e.command),e.command=nt.command(e.command),e.args=e.args.map(s=>nt.argument(s,n));let o=[e.command].concat(e.args).join(" ");e.args=["/d","/s","/c",`"${o}"`],e.command=process.env.comspec||"cmd.exe",e.options.windowsVerbatimArguments=!0}return e}function Fn(e,t,r){t&&!Array.isArray(t)&&(r=t,t=null),t=t?t.slice(0):[],r=Object.assign({},r);let n={command:e,args:t,options:r,file:void 0,original:{command:e,args:t}};return r.shell?n:jn(n)}rt.exports=Fn});var at=c((Oo,it)=>{"use strict";var se=process.platform==="win32";function ie(e,t){return Object.assign(new Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}function Dn(e,t){if(!se)return;let r=e.emit;e.emit=function(n,o){if(n==="exit"){let s=st(o,t,"spawn");if(s)return r.call(e,"error",s)}return r.apply(e,arguments)}}function st(e,t){return se&&e===1&&!t.file?ie(t.original,"spawn"):null}function Hn(e,t){return se&&e===1&&!t.file?ie(t.original,"spawnSync"):null}it.exports={hookChildProcess:Dn,verifyENOENT:st,verifyENOENTSync:Hn,notFoundError:ie}});var lt=c((qo,I)=>{"use strict";var ct=require("child_process"),ae=ot(),ce=at();function ut(e,t,r){let n=ae(e,t,r),o=ct.spawn(n.command,n.args,n.options);return ce.hookChildProcess(o,n),o}function Xn(e,t,r){let n=ae(e,t,r),o=ct.spawnSync(n.command,n.args,n.options);return o.error=o.error||ce.verifyENOENTSync(o.status,n),o}I.exports=ut;I.exports.spawn=ut;I.exports.sync=Xn;I.exports._parse=ae;I.exports._enoent=ce});var ft=c((ko,dt)=>{"use strict";dt.exports=e=>{let t=typeof e=="string"?`
`:`
`.charCodeAt(),r=typeof e=="string"?"\r":"\r".charCodeAt();return e[e.length-1]===t&&(e=e.slice(0,e.length-1)),e[e.length-1]===r&&(e=e.slice(0,e.length-1)),e}});var ht=c((Lo,q)=>{"use strict";var O=require("path"),pt=te(),mt=e=>{e={cwd:process.cwd(),path:process.env[pt()],execPath:process.execPath,...e};let t,r=O.resolve(e.cwd),n=[];for(;t!==r;)n.push(O.join(r,"node_modules/.bin")),t=r,r=O.resolve(r,"..");let o=O.resolve(e.cwd,e.execPath,"..");return n.push(o),n.concat(e.path).join(O.delimiter)};q.exports=mt;q.exports.default=mt;q.exports.env=e=>{e={env:process.env,...e};let t={...e.env},r=pt({env:t});return e.path=t[r],t[r]=q.exports(e),t}});var yt=c((No,ue)=>{"use strict";var St=(e,t)=>{for(let r of Reflect.ownKeys(t))Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));return e};ue.exports=St;ue.exports.default=St});var gt=c(($o,j)=>{"use strict";var Kn=yt(),M=new WeakMap,wt=(e,t={})=>{if(typeof e!="function")throw new TypeError("Expected a function");let r,n=0,o=e.displayName||e.name||"<anonymous>",s=function(...i){if(M.set(s,++n),n===1)r=e.apply(this,i),e=null;else if(t.throw===!0)throw new Error(`Function \`${o}\` can only be called once`);return r};return Kn(s,e),M.set(s,n),s};j.exports=wt;j.exports.default=wt;j.exports.callCount=e=>{if(!M.has(e))throw new Error(`The given function \`${e.name}\` is not wrapped by the \`onetime\` package`);return M.get(e)}});var xt=c(F=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});F.SIGNALS=void 0;var Vn=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];F.SIGNALS=Vn});var le=c(T=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});T.SIGRTMAX=T.getRealtimeSignals=void 0;var Wn=function(){let e=vt-bt+1;return Array.from({length:e},zn)};T.getRealtimeSignals=Wn;var zn=function(e,t){return{name:`SIGRT${t+1}`,number:bt+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},bt=34,vt=64;T.SIGRTMAX=vt});var Et=c(D=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});D.getSignals=void 0;var Yn=require("os"),Qn=xt(),Zn=le(),Jn=function(){let e=(0,Zn.getRealtimeSignals)();return[...Qn.SIGNALS,...e].map(er)};D.getSignals=Jn;var er=function({name:e,number:t,description:r,action:n,forced:o=!1,standard:s}){let{signals:{[e]:i}}=Yn.constants,a=i!==void 0;return{name:e,number:a?i:t,description:r,supported:a,action:n,forced:o,standard:s}}});var Tt=c(P=>{"use strict";Object.defineProperty(P,"__esModule",{value:!0});P.signalsByNumber=P.signalsByName=void 0;var tr=require("os"),It=Et(),nr=le(),rr=function(){return(0,It.getSignals)().reduce(or,{})},or=function(e,{name:t,number:r,description:n,supported:o,action:s,forced:i,standard:a}){return{...e,[t]:{name:t,number:r,description:n,supported:o,action:s,forced:i,standard:a}}},sr=rr();P.signalsByName=sr;var ir=function(){let e=(0,It.getSignals)(),t=nr.SIGRTMAX+1,r=Array.from({length:t},(n,o)=>ar(o,e));return Object.assign({},...r)},ar=function(e,t){let r=cr(e,t);if(r===void 0)return{};let{name:n,description:o,supported:s,action:i,forced:a,standard:u}=r;return{[e]:{name:n,number:e,description:o,supported:s,action:i,forced:a,standard:u}}},cr=function(e,t){let r=t.find(({name:n})=>tr.constants.signals[n]===e);return r!==void 0?r:t.find(n=>n.number===e)},ur=ir();P.signalsByNumber=ur});var Ct=c((jo,Pt)=>{"use strict";var{signalsByName:lr}=Tt(),dr=({timedOut:e,timeout:t,errorCode:r,signal:n,signalDescription:o,exitCode:s,isCanceled:i})=>e?`timed out after ${t} milliseconds`:i?"was canceled":r!==void 0?`failed with ${r}`:n!==void 0?`was killed with ${n} (${o})`:s!==void 0?`failed with exit code ${s}`:"failed",fr=({stdout:e,stderr:t,all:r,error:n,signal:o,exitCode:s,command:i,escapedCommand:a,timedOut:u,isCanceled:l,killed:f,parsed:{options:{timeout:h}}})=>{s=s===null?void 0:s,o=o===null?void 0:o;let m=o===void 0?void 0:lr[o].description,S=n&&n.code,w=`Command ${dr({timedOut:u,timeout:h,errorCode:S,signal:o,signalDescription:m,exitCode:s,isCanceled:l})}: ${i}`,v=Object.prototype.toString.call(n)==="[object Error]",$=v?`${w}
${n.message}`:w,_=[$,t,e].filter(Boolean).join(`
`);return v?(n.originalMessage=n.message,n.message=_):n=new Error(_),n.shortMessage=$,n.command=i,n.escapedCommand=a,n.exitCode=s,n.signal=o,n.signalDescription=m,n.stdout=e,n.stderr=t,r!==void 0&&(n.all=r),"bufferedData"in n&&delete n.bufferedData,n.failed=!0,n.timedOut=Boolean(u),n.isCanceled=l,n.killed=f&&!u,n};Pt.exports=fr});var At=c((Fo,de)=>{"use strict";var H=["stdin","stdout","stderr"],pr=e=>H.some(t=>e[t]!==void 0),Gt=e=>{if(!e)return;let{stdio:t}=e;if(t===void 0)return H.map(n=>e[n]);if(pr(e))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${H.map(n=>`\`${n}\``).join(", ")}`);if(typeof t=="string")return t;if(!Array.isArray(t))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof t}\``);let r=Math.max(t.length,H.length);return Array.from({length:r},(n,o)=>t[o])};de.exports=Gt;de.exports.node=e=>{let t=Gt(e);return t==="ipc"?"ipc":t===void 0||typeof t=="string"?[t,t,t,"ipc"]:t.includes("ipc")?t:[...t,"ipc"]}});var Rt=c((Do,X)=>{X.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&X.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&X.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var Nt=c((Ho,A)=>{var d=global.process,x=function(e){return e&&typeof e=="object"&&typeof e.removeListener=="function"&&typeof e.emit=="function"&&typeof e.reallyExit=="function"&&typeof e.listeners=="function"&&typeof e.kill=="function"&&typeof e.pid=="number"&&typeof e.on=="function"};x(d)?(Ot=require("assert"),C=Rt(),qt=/^win/i.test(d.platform),k=require("events"),typeof k!="function"&&(k=k.EventEmitter),d.__signal_exit_emitter__?p=d.__signal_exit_emitter__:(p=d.__signal_exit_emitter__=new k,p.count=0,p.emitted={}),p.infinite||(p.setMaxListeners(1/0),p.infinite=!0),A.exports=function(e,t){if(!x(global.process))return function(){};Ot.equal(typeof e,"function","a callback must be provided for exit handler"),G===!1&&fe();var r="exit";t&&t.alwaysLast&&(r="afterexit");var n=function(){p.removeListener(r,e),p.listeners("exit").length===0&&p.listeners("afterexit").length===0&&K()};return p.on(r,e),n},K=function(){!G||!x(global.process)||(G=!1,C.forEach(function(t){try{d.removeListener(t,V[t])}catch{}}),d.emit=W,d.reallyExit=pe,p.count-=1)},A.exports.unload=K,b=function(t,r,n){p.emitted[t]||(p.emitted[t]=!0,p.emit(t,r,n))},V={},C.forEach(function(e){V[e]=function(){if(!!x(global.process)){var r=d.listeners(e);r.length===p.count&&(K(),b("exit",null,e),b("afterexit",null,e),qt&&e==="SIGHUP"&&(e="SIGINT"),d.kill(d.pid,e))}}}),A.exports.signals=function(){return C},G=!1,fe=function(){G||!x(global.process)||(G=!0,p.count+=1,C=C.filter(function(t){try{return d.on(t,V[t]),!0}catch{return!1}}),d.emit=Lt,d.reallyExit=kt)},A.exports.load=fe,pe=d.reallyExit,kt=function(t){!x(global.process)||(d.exitCode=t||0,b("exit",d.exitCode,null),b("afterexit",d.exitCode,null),pe.call(d,d.exitCode))},W=d.emit,Lt=function(t,r){if(t==="exit"&&x(global.process)){r!==void 0&&(d.exitCode=r);var n=W.apply(this,arguments);return b("exit",d.exitCode,null),b("afterexit",d.exitCode,null),n}else return W.apply(this,arguments)}):A.exports=function(){return function(){}};var Ot,C,qt,k,p,K,b,V,G,fe,pe,kt,W,Lt});var _t=c((Xo,$t)=>{"use strict";var mr=require("os"),hr=Nt(),Sr=1e3*5,yr=(e,t="SIGTERM",r={})=>{let n=e(t);return wr(e,t,r,n),n},wr=(e,t,r,n)=>{if(!gr(t,r,n))return;let o=br(r),s=setTimeout(()=>{e("SIGKILL")},o);s.unref&&s.unref()},gr=(e,{forceKillAfterTimeout:t},r)=>xr(e)&&t!==!1&&r,xr=e=>e===mr.constants.signals.SIGTERM||typeof e=="string"&&e.toUpperCase()==="SIGTERM",br=({forceKillAfterTimeout:e=!0})=>{if(e===!0)return Sr;if(!Number.isFinite(e)||e<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`);return e},vr=(e,t)=>{e.kill()&&(t.isCanceled=!0)},Er=(e,t,r)=>{e.kill(t),r(Object.assign(new Error("Timed out"),{timedOut:!0,signal:t}))},Ir=(e,{timeout:t,killSignal:r="SIGTERM"},n)=>{if(t===0||t===void 0)return n;let o,s=new Promise((a,u)=>{o=setTimeout(()=>{Er(e,r,u)},t)}),i=n.finally(()=>{clearTimeout(o)});return Promise.race([s,i])},Tr=({timeout:e})=>{if(e!==void 0&&(!Number.isFinite(e)||e<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`)},Pr=async(e,{cleanup:t,detached:r},n)=>{if(!t||r)return n;let o=hr(()=>{e.kill()});return n.finally(()=>{o()})};$t.exports={spawnedKill:yr,spawnedCancel:vr,setupTimeout:Ir,validateTimeout:Tr,setExitHandler:Pr}});var Ut=c((Ko,Bt)=>{"use strict";var g=e=>e!==null&&typeof e=="object"&&typeof e.pipe=="function";g.writable=e=>g(e)&&e.writable!==!1&&typeof e._write=="function"&&typeof e._writableState=="object";g.readable=e=>g(e)&&e.readable!==!1&&typeof e._read=="function"&&typeof e._readableState=="object";g.duplex=e=>g.writable(e)&&g.readable(e);g.transform=e=>g.duplex(e)&&typeof e._transform=="function";Bt.exports=g});var jt=c((Vo,Mt)=>{"use strict";var{PassThrough:Cr}=require("stream");Mt.exports=e=>{e={...e};let{array:t}=e,{encoding:r}=e,n=r==="buffer",o=!1;t?o=!(r||n):r=r||"utf8",n&&(r=null);let s=new Cr({objectMode:o});r&&s.setEncoding(r);let i=0,a=[];return s.on("data",u=>{a.push(u),o?i=a.length:i+=u.length}),s.getBufferedValue=()=>t?a:n?Buffer.concat(a,i):a.join(""),s.getBufferedLength=()=>i,s}});var Ft=c((Wo,L)=>{"use strict";var{constants:Gr}=require("buffer"),Ar=require("stream"),{promisify:Rr}=require("util"),Or=jt(),qr=Rr(Ar.pipeline),z=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function me(e,t){if(!e)throw new Error("Expected a stream");t={maxBuffer:1/0,...t};let{maxBuffer:r}=t,n=Or(t);return await new Promise((o,s)=>{let i=a=>{a&&n.getBufferedLength()<=Gr.MAX_LENGTH&&(a.bufferedData=n.getBufferedValue()),s(a)};(async()=>{try{await qr(e,n),o()}catch(a){i(a)}})(),n.on("data",()=>{n.getBufferedLength()>r&&i(new z)})}),n.getBufferedValue()}L.exports=me;L.exports.buffer=(e,t)=>me(e,{...t,encoding:"buffer"});L.exports.array=(e,t)=>me(e,{...t,array:!0});L.exports.MaxBufferError=z});var Ht=c((zo,Dt)=>{"use strict";var{PassThrough:kr}=require("stream");Dt.exports=function(){var e=[],t=new kr({objectMode:!0});return t.setMaxListeners(0),t.add=r,t.isEmpty=n,t.on("unpipe",o),Array.prototype.slice.call(arguments).forEach(r),t;function r(s){return Array.isArray(s)?(s.forEach(r),this):(e.push(s),s.once("end",o.bind(null,s)),s.once("error",t.emit.bind(t,"error")),s.pipe(t,{end:!1}),this)}function n(){return e.length==0}function o(s){e=e.filter(function(i){return i!==s}),!e.length&&t.readable&&t.end()}}});var Wt=c((Yo,Vt)=>{"use strict";var Kt=Ut(),Xt=Ft(),Lr=Ht(),Nr=(e,t)=>{t===void 0||e.stdin===void 0||(Kt(t)?t.pipe(e.stdin):e.stdin.end(t))},$r=(e,{all:t})=>{if(!t||!e.stdout&&!e.stderr)return;let r=Lr();return e.stdout&&r.add(e.stdout),e.stderr&&r.add(e.stderr),r},he=async(e,t)=>{if(!!e){e.destroy();try{return await t}catch(r){return r.bufferedData}}},Se=(e,{encoding:t,buffer:r,maxBuffer:n})=>{if(!(!e||!r))return t?Xt(e,{encoding:t,maxBuffer:n}):Xt.buffer(e,{maxBuffer:n})},_r=async({stdout:e,stderr:t,all:r},{encoding:n,buffer:o,maxBuffer:s},i)=>{let a=Se(e,{encoding:n,buffer:o,maxBuffer:s}),u=Se(t,{encoding:n,buffer:o,maxBuffer:s}),l=Se(r,{encoding:n,buffer:o,maxBuffer:s*2});try{return await Promise.all([i,a,u,l])}catch(f){return Promise.all([{error:f,signal:f.signal,timedOut:f.timedOut},he(e,a),he(t,u),he(r,l)])}},Br=({input:e})=>{if(Kt(e))throw new TypeError("The `input` option cannot be a stream in sync mode")};Vt.exports={handleInput:Nr,makeAllStream:$r,getSpawnedResult:_r,validateInputSync:Br}});var Yt=c((Qo,zt)=>{"use strict";var Ur=(async()=>{})().constructor.prototype,Mr=["then","catch","finally"].map(e=>[e,Reflect.getOwnPropertyDescriptor(Ur,e)]),jr=(e,t)=>{for(let[r,n]of Mr){let o=typeof t=="function"?(...s)=>Reflect.apply(n.value,t(),s):n.value.bind(t);Reflect.defineProperty(e,r,{...n,value:o})}return e},Fr=e=>new Promise((t,r)=>{e.on("exit",(n,o)=>{t({exitCode:n,signal:o})}),e.on("error",n=>{r(n)}),e.stdin&&e.stdin.on("error",n=>{r(n)})});zt.exports={mergePromise:jr,getSpawnedPromise:Fr}});var Jt=c((Zo,Zt)=>{"use strict";var Qt=(e,t=[])=>Array.isArray(t)?[e,...t]:[e],Dr=/^[\w.-]+$/,Hr=/"/g,Xr=e=>typeof e!="string"||Dr.test(e)?e:`"${e.replace(Hr,'\\"')}"`,Kr=(e,t)=>Qt(e,t).join(" "),Vr=(e,t)=>Qt(e,t).map(r=>Xr(r)).join(" "),Wr=/ +/g,zr=e=>{let t=[];for(let r of e.trim().split(Wr)){let n=t[t.length-1];n&&n.endsWith("\\")?t[t.length-1]=`${n.slice(0,-1)} ${r}`:t.push(r)}return t};Zt.exports={joinCommand:Kr,getEscapedCommand:Vr,parseCommand:zr}});var an=c((Jo,R)=>{"use strict";var Yr=require("path"),ye=require("child_process"),Qr=lt(),Zr=ft(),Jr=ht(),eo=gt(),Y=Ct(),tn=At(),{spawnedKill:to,spawnedCancel:no,setupTimeout:ro,validateTimeout:oo,setExitHandler:so}=_t(),{handleInput:io,getSpawnedResult:ao,makeAllStream:co,validateInputSync:uo}=Wt(),{mergePromise:en,getSpawnedPromise:lo}=Yt(),{joinCommand:nn,parseCommand:rn,getEscapedCommand:on}=Jt(),fo=1e3*1e3*100,po=({env:e,extendEnv:t,preferLocal:r,localDir:n,execPath:o})=>{let s=t?{...process.env,...e}:e;return r?Jr.env({env:s,cwd:n,execPath:o}):s},sn=(e,t,r={})=>{let n=Qr._parse(e,t,r);return e=n.command,t=n.args,r=n.options,r={maxBuffer:fo,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:r.cwd||process.cwd(),execPath:process.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...r},r.env=po(r),r.stdio=tn(r),process.platform==="win32"&&Yr.basename(e,".exe")==="cmd"&&t.unshift("/q"),{file:e,args:t,options:r,parsed:n}},N=(e,t,r)=>typeof t!="string"&&!Buffer.isBuffer(t)?r===void 0?void 0:"":e.stripFinalNewline?Zr(t):t,Q=(e,t,r)=>{let n=sn(e,t,r),o=nn(e,t),s=on(e,t);oo(n.options);let i;try{i=ye.spawn(n.file,n.args,n.options)}catch(S){let y=new ye.ChildProcess,w=Promise.reject(Y({error:S,stdout:"",stderr:"",all:"",command:o,escapedCommand:s,parsed:n,timedOut:!1,isCanceled:!1,killed:!1}));return en(y,w)}let a=lo(i),u=ro(i,n.options,a),l=so(i,n.options,u),f={isCanceled:!1};i.kill=to.bind(null,i.kill.bind(i)),i.cancel=no.bind(null,i,f);let m=eo(async()=>{let[{error:S,exitCode:y,signal:w,timedOut:v},$,_,fn]=await ao(i,n.options,l),we=N(n.options,$),ge=N(n.options,_),xe=N(n.options,fn);if(S||y!==0||w!==null){let be=Y({error:S,exitCode:y,signal:w,stdout:we,stderr:ge,all:xe,command:o,escapedCommand:s,parsed:n,timedOut:v,isCanceled:f.isCanceled,killed:i.killed});if(!n.options.reject)return be;throw be}return{command:o,escapedCommand:s,exitCode:0,stdout:we,stderr:ge,all:xe,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return io(i,n.options.input),i.all=co(i,n.options),en(i,m)};R.exports=Q;R.exports.sync=(e,t,r)=>{let n=sn(e,t,r),o=nn(e,t),s=on(e,t);uo(n.options);let i;try{i=ye.spawnSync(n.file,n.args,n.options)}catch(l){throw Y({error:l,stdout:"",stderr:"",all:"",command:o,escapedCommand:s,parsed:n,timedOut:!1,isCanceled:!1,killed:!1})}let a=N(n.options,i.stdout,i.error),u=N(n.options,i.stderr,i.error);if(i.error||i.status!==0||i.signal!==null){let l=Y({stdout:a,stderr:u,error:i.error,signal:i.signal,exitCode:i.status,command:o,escapedCommand:s,parsed:n,timedOut:i.error&&i.error.code==="ETIMEDOUT",isCanceled:!1,killed:i.signal!==null});if(!n.options.reject)return l;throw l}return{command:o,escapedCommand:s,exitCode:0,stdout:a,stderr:u,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}};R.exports.command=(e,t)=>{let[r,...n]=rn(e);return Q(r,n,t)};R.exports.commandSync=(e,t)=>{let[r,...n]=rn(e);return Q.sync(r,n,t)};R.exports.node=(e,t,r={})=>{t&&!Array.isArray(t)&&typeof t=="object"&&(r=t,t=[]);let n=tn.node(r),o=process.execArgv.filter(a=>!a.startsWith("--inspect")),{nodePath:s=process.execPath,nodeOptions:i=o}=r;return Q(s,[...i,e,...Array.isArray(t)?t:[]],{...r,stdin:void 0,stdout:void 0,stderr:void 0,stdio:n,shell:!1})}});var yo={};wn(yo,{default:()=>So});module.exports=gn(yo);var Z=require("@raycast/api");var cn=Ee(require("node:process"),1),un=Ee(an(),1);async function ln(e,{humanReadableOutput:t=!0}={}){if(cn.default.platform!=="darwin")throw new Error("macOS only");let r=t?[]:["-ss"],{stdout:n}=await(0,un.default)("osascript",["-e",e,r]);return n}var mo=async(e=!1)=>{await ln(`
    set chromiumVariants to {"Google Chrome", "Chromium", "Opera", "Vivaldi", "Brave Browser", "Microsoft Edge"}
    set webkitVariants to {"Safari", "Webkit"}

    tell application "System Events"
      set frontmostApp to name of first process whose frontmost is true
    end tell

    set chromeScript to "tell application \\"" & frontmostApp & "\\"
        if (count every tab of front window) > 0
          set theURL to URL of active tab of front window
          if ${e} then close active tab of front window
          make new window with properties {mode:\\"incognito\\"}
          set URL of active tab of front window to theURL
        end if
      end tell"

    set webkitScript to "tell application \\"" & frontmostApp & "\\"
        if (count every tab of front window) > 0
          set theURL to URL of current tab of front window
          if ${e} then close current tab of front window
          tell application \\"System Events\\"
            keystroke \\"n\\" using {command down, shift down}
          end tell
          activate
          set URL of current tab of front window to theURL
        end if
      end tell"

    if frontmostApp is in chromiumVariants then
      run script chromeScript
    else if frontmostApp is in webkitVariants then
      run script webkitScript
    else if frontmostApp is "Arc"
      tell application "Arc"
        if (count every tab of front window) > 0 then
          set theURL to URL of active tab of front window
          if ${e} then close active tab of front window
          make new window with properties {incognito:true}
          tell front window to make new tab with properties {URL:theURL}
        end if
      end tell
    else
      error "You need a supported browser as your frontmost app."
    end if
`)},dn=mo;var ho=async()=>{try{await(0,Z.closeMainWindow)(),await dn(!0)}catch(e){console.log(e),await(0,Z.showHUD)("\u274C Cloning tab failed")}},So=ho;0&&(module.exports={});
